/*
 *  DDL script for PostgreSQL 7.2
 *
 *  Copyright (c) 1998-2002, The University of Sheffield.
 *
 *  This file is part of GATE (see http://gate.ac.uk/), and is free
 *  software, licenced under the GNU Library General Public License,
 *  Version 2, June 1991 (in the distribution as file licence.html,
 *  and also available at http://gate.ac.uk/gate/licence.html).
 *
 *  Marin Dimitrov, 12/Mar/2002
 *
 *
 *  $Id$
 *
 */


DROP TABLE "T_FEATURE_KEY";

CREATE TABLE "T_FEATURE_KEY" (
   "FK_ID"         int4 NOT NULL DEFAULT NEXTVAL('SEQ_FK_ID'),
   "FK_STRING"     varchar(128) NOT NULL,
 PRIMARY KEY ("FK_ID")
);


DROP TABLE "T_USER";

CREATE TABLE "T_USER" (
   "USR_ID"        int4 NOT NULL DEFAULT NEXTVAL('SEQ_USR_ID'),
   "USR_LOGIN"     varchar(16) NOT NULL,
   "USR_PASS"      varchar(16) NOT NULL,
 PRIMARY KEY ("USR_ID")
);


DROP TABLE "T_GROUP";

CREATE TABLE "T_GROUP" (
   "GRP_ID"        int4 NOT NULL DEFAULT NEXTVAL('SEQ_GRP_ID'),
   "GRP_NAME"      varchar(128) NOT NULL,
 PRIMARY KEY ("GRP_ID")
);


DROP TABLE "T_USER_GROUP";

CREATE TABLE "T_USER_GROUP" (
   "UGRP_ID"           int4 DEFAULT nextval('SEQ_UGRP_ID')  NOT NULL ,
   "UGRP_USER_ID"      int4 NOT NULL ,
   "UGRP_GROUP_ID"     int4 NOT NULL ,
   FOREIGN KEY ("UGRP_USER_ID")
         REFERENCES "T_USER"("USR_ID")
         MATCH FULL ,
   FOREIGN KEY ("UGRP_GROUP_ID")
         REFERENCES "T_GROUP"("GRP_ID")
         MATCH FULL ,
   PRIMARY KEY ("UGRP_ID")
);


DROP TABLE "T_DOC_ENCODING";

CREATE TABLE "T_DOC_ENCODING" (
   "ENC_ID"        int4 NOT NULL DEFAULT NEXTVAL('SEQ_ENC_ID'),
   "ENC_NAME"      varchar(16) NOT NULL,
 PRIMARY KEY ("ENC_ID")
);

DROP TABLE "T_DOC_CONTENT";

CREATE TABLE "T_DOC_CONTENT" (
   "DC_ID"             int4 DEFAULT nextval('SEQ_DC_ID')  NOT NULL ,
   "DC_ENCODING_ID"    int4,
   "DC_CHARACTER_CONTENT" text,
   "DC_BINARY_CONTENT" oid,
   "DC_CONTENT_TYPE"   int2 NOT NULL ,
   FOREIGN KEY ("DC_ENCODING_ID")
      REFERENCES "T_DOC_ENCODING"("ENC_ID")
      MATCH FULL ,
   PRIMARY KEY ("DC_ID")
);

DROP TABLE "T_FEATURE";

CREATE TABLE "T_FEATURE" (
   "FT_ID"             int4 DEFAULT nextval('SEQ_FT_ID')  NOT NULL ,
   "FT_ENTITY_ID"      int4 NOT NULL ,
   "FT_ENTITY_TYPE"    int2 NOT NULL ,
   "FT_KEY_ID"         int4 NOT NULL ,
   "FT_NUMBER_VALUE"   int4,
   "FT_BINARY_VALUE"   oid,
   "FT_CHARACTER_VALUE" varchar(4000),
   "FT_LONG_CHARACTER_VALUE" text,
   "FT_VALUE_TYPE"     int2 NOT NULL ,
   FOREIGN KEY ("FT_KEY_ID")
      REFERENCES "T_FEATURE_KEY"("FK_ID")
      MATCH FULL ,
   PRIMARY KEY ("FT_ID")
);

DROP TABLE "T_LR_TYPE";
CREATE TABLE "T_LR_TYPE" (
   "LRTP_ID"       int4 NOT NULL DEFAULT NEXTVAL('SEQ_LRTP_ID'),
   "LRTP_TYPE"     varchar(128) NOT NULL,
 PRIMARY KEY ("LRTP_ID")
);


DROP TABLE "T_LANG_RESOURCE";
CREATE TABLE "T_LANG_RESOURCE" (
   "LR_ID"             int4 DEFAULT nextval('SEQ_LR_ID')  NOT NULL ,
   "LR_OWNER_USER_ID"  int4,
   "LR_OWNER_GROUP_ID" int4,
   "LR_LOCKING_USER_ID" int4,
   "LR_TYPE_ID"        int4 NOT NULL ,
   "LR_NAME"           varchar(128) NOT NULL ,
   "LR_ACCESS_MODE"    int2 NOT NULL ,
   "LR_PARENT_ID"      int4,
   FOREIGN KEY ("LR_PARENT_ID")
      REFERENCES "T_LANG_RESOURCE"("LR_ID")
      MATCH FULL ,
   FOREIGN KEY ("LR_LOCKING_USER_ID")
      REFERENCES "T_USER"("USR_ID")
      MATCH FULL ,
   FOREIGN KEY ("LR_OWNER_USER_ID")
      REFERENCES "T_USER"("USR_ID")
      MATCH FULL ,
   FOREIGN KEY ("LR_OWNER_GROUP_ID")
      REFERENCES "T_GROUP"("GRP_ID")
      MATCH FULL ,
   PRIMARY KEY ("LR_ID")
);


DROP TABLE "T_DOCUMENT";
CREATE TABLE "T_DOCUMENT" (
   "DOC_ID"            int4 DEFAULT nextval('SEQ_DOC_ID')  NOT NULL ,
   "DOC_CONTENT_ID"    int4,
   "DOC_LR_ID"         int4 NOT NULL ,
   "DOC_URL"           varchar(4000) NOT NULL ,
   "DOC_START"         int4,
   "DOC_END"           int4,
   "DOC_IS_MARKUP_AWARE" bool NOT NULL ,
   FOREIGN KEY ("DOC_CONTENT_ID")
      REFERENCES "T_DOC_CONTENT"("DC_ID")
      MATCH FULL ,
   FOREIGN KEY ("DOC_LR_ID")
      REFERENCES "T_LANG_RESOURCE"("LR_ID")
      MATCH FULL ,
   PRIMARY KEY ("DOC_ID")
);


DROP TABLE "T_NODE";
CREATE TABLE "T_NODE" (
   "NODE_GLOBAL_ID"    int4 DEFAULT nextval('SEQ_NODE_GLOBAL_ID')  NOT NULL ,
   "NODE_DOC_ID"       int4 NOT NULL ,
   "NODE_LOCAL_ID"     int4 NOT NULL ,
   "NODE_OFFSET"       int4 NOT NULL ,
   FOREIGN KEY ("NODE_DOC_ID")
      REFERENCES "T_DOCUMENT"("DOC_ID")
      MATCH FULL ,
   PRIMARY KEY ("NODE_GLOBAL_ID")
);


DROP TABLE "T_ANNOTATION_TYPE";
CREATE TABLE "T_ANNOTATION_TYPE" (
   "AT_ID"         int4 NOT NULL DEFAULT NEXTVAL('SEQ_AT_ID'),
   "AT_NAME"       varchar(128) NULL,
   PRIMARY KEY ("AT_ID")
);


DROP TABLE "T_ANNOTATION";
CREATE TABLE "T_ANNOTATION" (
   "ANN_GLOBAL_ID"     int4 DEFAULT nextval('SEQ_ANN_GLOBAL_ID')  NOT NULL ,
   "ANN_DOC_ID"        int4,
   "ANN_LOCAL_ID"      int4 NOT NULL ,
   "ANN_AT_ID"         int4 NOT NULL ,
   "ANN_STARTNODE_ID"  int4 NOT NULL ,
   "ANN_ENDNODE_ID"    int4 NOT NULL ,
   FOREIGN KEY ("ANN_DOC_ID")
      REFERENCES "T_DOCUMENT"("DOC_ID")
      MATCH FULL ,
   FOREIGN KEY ("ANN_AT_ID")
      REFERENCES "T_ANNOTATION_TYPE"("AT_ID")
      MATCH FULL ,
   FOREIGN KEY ("ANN_STARTNODE_ID")
      REFERENCES "T_NODE"("NODE_GLOBAL_ID")
      MATCH FULL ,
   FOREIGN KEY ("ANN_ENDNODE_ID")
      REFERENCES "T_NODE"("NODE_GLOBAL_ID")
      MATCH FULL ,
   PRIMARY KEY ("ANN_GLOBAL_ID")
);


DROP TABLE "T_ANNOT_SET";
CREATE TABLE "T_ANNOT_SET" (
   "AS_ID"             int4 DEFAULT nextval('SEQ_AS_ID')  NOT NULL ,
   "AS_NAME"           varchar(128) NOT NULL ,
   "AS_DOC_ID"         int4 NOT NULL ,
   FOREIGN KEY ("AS_DOC_ID")
      REFERENCES "T_DOCUMENT"("DOC_ID")
      MATCH FULL ,
   PRIMARY KEY ("AS_ID")
);

DROP TABLE "T_AS_ANNOTATION";
CREATE TABLE "T_AS_ANNOTATION" (
   "ASANN_ID"          int4 DEFAULT nextval('SEQ_ASANN_ID')  NOT NULL ,
   "ASANN_ANN_ID"      int4 NOT NULL ,
   "ASANN_AS_ID"       int4 NOT NULL ,
   FOREIGN KEY ("ASANN_ANN_ID")
      REFERENCES "T_ANNOTATION"("ANN_GLOBAL_ID")
      MATCH FULL ,
   FOREIGN KEY ("ASANN_AS_ID")
      REFERENCES "T_ANNOT_SET"("AS_ID")
      MATCH FULL ,
   PRIMARY KEY ("ASANN_ID")
);


DROP TABLE "T_CORPUS";
CREATE TABLE "T_CORPUS" (
   "CORP_ID"           int4 DEFAULT nextval('SEQ_CORP_ID')  NOT NULL ,
   "CORP_LR_ID"        int4 NOT NULL ,
   FOREIGN KEY ("CORP_LR_ID")
      REFERENCES "T_LANG_RESOURCE"("LR_ID")
      MATCH FULL ,
   PRIMARY KEY ("CORP_ID")
);


DROP TABLE "T_CORPUS_DOCUMENT";
CREATE TABLE "T_CORPUS_DOCUMENT" (
   "CD_ID"             int4 DEFAULT nextval('SEQ_CD_ID')  NOT NULL ,
   "CD_CORP_ID"        int4 NOT NULL ,
   "CD_DOC_ID"         int4 NOT NULL ,
   FOREIGN KEY ("CD_CORP_ID")
      REFERENCES "T_CORPUS"("CORP_ID")
      MATCH FULL ,
   FOREIGN KEY ("CD_DOC_ID")
      REFERENCES "T_DOCUMENT"("DOC_ID")
      MATCH FULL ,
   PRIMARY KEY ("CD_ID")
);


DROP TABLE "T_PARAMETER";
CREATE TABLE "T_PARAMETER" (
   "PAR_ID"        int4 NOT NULL DEFAULT NEXTVAL('SEQ_PAR_ID'),
   "PAR_KEY"       varchar(16) NOT NULL,
   "PAR_VALUE_STRING" varchar(128) NULL,
   "PAR_VALUE_DATE" date NULL,
   "PAR_VALUE_NUMBER" int4 NULL,
   PRIMARY KEY ("PAR_ID")
);
